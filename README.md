# Лабораторная работа №2 "Среда исполнения программ на языке Pascal--"

## Состав команды

- Гонозов Леонид
- Гутянский Алексей
- Завьялов Алексей

## Цель 

__Цель данной работы__ - разработать интерпретатор языка программирования Pascal--  (PascalABC.NET c ограниченным функционалом) с поддержкой написания кода.

## Задачи

Выполнение работы предполагает решение следующих задач:

  * Реализация обработки входящего файла с кодом и его хранение в виде иерархического списка.
  * Выполнение синтаксического контроля корректности текста программы.
  * Хранение переменных и констант с помощью дерева поиска.
  * Реализация поддержки условных операторов и циклов. 
  * Осуществление подсчета условных выражений и операций с использованием постфиксной формы.
  * Разработка тестов для созданной программной системы.

## Примеры

Примеры программ написанных на языке Pascal-- 

### Пример 1

```pascal
program Example1;
const
    Pi: double = 3.1415926;
var
    num1, num2: integer;
    Res, d: double;
begin
    num1 := 5;
    Write(‘Введите четное целое число: ‘);
    Read(num2);
    Write(‘Введите вещественное число: ‘);
	Read(d);
    if (d mod 2 = 0) then
    begin
        Res := (num1 - num2 * 5 div 2) / (d * 2);
        Write("Результат = ", Res);
    end
    else
        Write("Неверный ввод");
end.

```

### Пример 2

```pascal
program Example2;
const
    e : double = 2.71828;
var
    opcode, operand1, operand2, Res: integer;
    foo1, foo2: double;
begin
    WriteLn('*** Программа-калькулятор ***');
    Write('Введите "1" для сложения, "2" для вычитания: ');
    Read(opcode);
    if (opcode <> 1) and (opcode <> 2) then 
      begin
        Write('Неверный ввод');
      end
    else
      begin
        Write('Введите первый операнд: ');
    	  Read(operand1);
    	  Write('Введите второй операнд: ');
    	  Read(operand2);
        if (opcode = 1) then
          begin
            Res := operand1 + operand2;
            Write('Результат = ', Res);
         end
        else
          if (opcode = 2) then
            begin
              Res := operand1 - operand2;
              Write('Результат = ', Res);
          end
      end       
end.
```
## Описание синтаксиса

В начале кода ставится *program <НазваниеПрограммы>*;

### Блок объявления констант 
Ключевое слово const указывает на начало блока объявления констант. Константы задаются путем указания имени, двоеточия, типа константы, знак равно и значение константы. В конце ставится точка с запятой.

*<ИмяКонстанты> : <ТипДанных> = <ЗначениеКонстанты>;*

### Блок объявления переменных
Ключевое слово var указывает на начало блока объявления переменных. Переменные задаются путем указания имени (или нескольких имён, разделенных запятой), двоеточия, типа переменной (переменных). В конце ставится точка с запятой.

*<ИмяПеременной1>, <ИмяПеременной2> : <ТипДанных>;*

### Правила именования переменных и констант 
Имя переменной/константы может начинаться с символа подчеркивания _ или латинской буквы. Последующие символы могут быть цифрами, латинскими буквами или символами подчеркивания _.

### Типы данных 
В pamm представлено 2 числовых типа данных:

* Целочисленный тип integer представляется 64-битным числом со знаком в дополнительном коде. 
* Тип с плавающей точкой double представляется числом двойной точности стандарта IEEE 754.

### Числовые литералы
* Целые числа задаются задаются последовательностями символов десятичных разрядов (от 0 до 10). Перед разрядами может стоять минус, когда число отрицательное.
* Числа с плавающей точкой задаются последовательностями символов десятичных разрядов (от 0 до 10). Перед разрядами может стоять минус, когда число отрицательное. Дробная часть числа может быть отделена точкой. В числе должна быть ровно одна точка.

Стоит отметить, что целочисленные и дробные литералы отличаются лишь наличием разделительной точки, потому следует проявлять внимательность при написании кода в целях минимизации количества преобразований типов.

### Строковые литералы
Строковый литерал используется в операторах вывода. Этот вид литералов ограничивается одинарными кавычками в начале и в конце. Внутри может находиться любая последовательность символов. Одинарные кавычки внутри строкового литерала должны экранироваться символом \\. Сам символ \ тоже должен экранироваться символом \\.

Например,
*‘Очень крутая строка для практики написания кода на \’cамом лучшем\’ языке программирования \\\\\^\_\^/’*

Выведется как 
*Очень крутая строка для практики написания кода на ‘самом лучшем’ языке программирования \\\^\_\^\/*

### Блоки кода
Блок кода начинается с ключевого слова begin и заканчивается end. Между ними должны находиться конструкции языка. Внешний (основной) блок кода программы оканчивается на end. , в то время как остальные end не требуют после себя пунктуации.
Отдельные конструкции языка также являются блоками кода, что позволяет использовать однострочные конструкции без указания begin..end.

### Конструкция присвания
Для присваивания значения переменной в pamm используется конструкция присваивания :=. Слева от оператора указывается объявленное в блоке var имя переменной. Справа указывается арифметическое выражение.

*<ИмяПеременной> := <АрифметическоеВыражение>;*

### Условная конструкция
Для управления последовательностью исполнения используется условная конструкция if..else. Выбор ветви исполнения происходит по результату вычисления логического выражения.

* Вариант 1:

*If (<ЛогическоеВыражение>) then*

*<БлокКода>*

* Вариант 2:

*If (<ЛогическоеВыражение>) then*

*<БлокКода1>*

*else*

*<БлокКода2>*

### Конструкция вывода
Для вывода информации в стандартный поток вывода используется конструкция write. Формат использования схож с вызовом функции - *<ИмяФункции>(<Аргумент1>, <Аргумент2>, …);*. write принимает не менее одного аргумента. Аргументы могут быть строковыми литералами или названиями переменных. Разделение аргументов происходит с помощью запятой. Существует также форма writeln, добавляющая перенос строки после вывода аргументов.

*write(<Аргумент1>, <Аргумент2>, …);*

### Конструкция ввода
Для ввода данных из стандартного потока ввода используется конструкция read. Использование аналогично использованию конструкции вывода, за исключением типов и количества аргументов. Конструкция ввода принимает единственный аргумент - название переменной, объявленной в блоке var.

*read(<НазваниеПеременной>);*

## Арифметические выражения

Арифметические выражения позволяют выполнять арифметические операции с использованием констант, переменных и числовых литералов. Доступны арифметические операторы +, -, *, /, div, mod.
+, -, * выполняют соответсвенно сложение, вычитание и умножение. Если оба операнда целые, то целочисленно. Если хотя бы один из них дробный, то в числах с плавающей точкой.
/ выполняет деление для чисел с плавающей точкой. Целые числа автоматически приводятся к дробным.
div выполняет целочисленное деление. И делимое и делитель должны быть целыми числами.
Оператор минус - может быть использован в префиксной (унарной) форме.
mod выполняет взятие остатка от деления. И делимое и делитель должны быть целыми числами. Знак результата равен знаку делимого (за исключением нуля, т.к. положительный и отрицательный нули неразличимы).
Для управления последовательностью операций могут быть использованы круглые скобки ( ).

### Логические выражения

Логические выражения используются для принятия решений в условном операторе. Логические операции выполняются с помощью логических операторов <, >, =, <=, >=, <>, and, or, not. Для управления последовательностью операций могут быть использованы круглые скобки ( ).

Логические операции над арифметическими выражениями:

* *<АрифметическоеВыражение> < <АрифметическоеВыражение>* - левый меньше правого
* *<АрифметическоеВыражение> > <АрифметическоеВыражение>* - левый больше правого
* *<АрифметическоеВыражение> <= <АрифметическоеВыражение>* - левый меньше либо равен правому
* *<АрифметическоеВыражение> >= <АрифметическоеВыражение>* - левый больше либо равен правому
* *<АрифметическоеВыражение> <> <АрифметическоеВыражение>* - левый не равен правому

Логические операции над логическими выражениями:
	
* *<ЛогическоеВыражение> and <ЛогическоеВыражение>* - истина, если оба истина.
* *<ЛогическоеВыражение> or <ЛогическоеВыражение>* - истина, если хотя бы один истина.
* *not <ЛогическоеВыражение>* - истина, если операнд ложь.

### Приоритеты бинарных и унарных операторов
Сверху вниз приоритет убывает.

1. Унарный минус и оператор not
2. * / div mod мультипликативные операторы
3. + - аддитивные операторы
4. < <= > >= отношения сравнения
5. = <> отношения равенства
6. and конъюнкция
7. or дизъюнкция

## Шаги выполнения

  1. Подготовить ТЗ на проект.
  2. Выписать список объектов и основных алгоритмов.
  3. Описать модели объектов и основные алгоритмы.		
     * По каждому объекту подготовить описание модели.
     * По каждому алгоритму подготовить описание с использованием ссылок, где лежит это описание.
  4. Подготовить проект программной системы	
     * Заготовки классов в h-файлах.
     * Заготовки форм в Visual Studio для графического интерфейса.
  5. Разработать пустые (add failure) версии модульных тестов для методов разработанных классов, используя библиотеку google test.
  6. Разработать тесты и код.

## Используемые инструменты
  * Система контроля версий Git.
  * Клиент Git с графическим интерфейсом пользователя GitHub Desktop.
  * Фреймворк для написания автоматических тестов Google Test.
  * Среда разработки Microsoft Visual Studio 2022.
  * Утилита CMake для генерации проектов по сборке исходных кодов.
  * Графическая библиотека Qt для реализации интерфейса.

## Структура проекта
  * libs — директория для размещения внешних библиотек, используемых в проекте (googletest, qt и т.д.).
  * include — директория для размещения заголовочных файлов.
  * src — директория с исходными кодами (cpp-файлы).
  * app — директория для размещения приложения с графическим интерфейсом.
  * tests — директория с модульными тестами и основным приложением, инициализирующим запуск тестов.
  * README.md — информация о проекте, которую Вы сейчас читаете.
  * .gitignore — перечень расширений файлов, игнорируемых Git при добавлении файлов в репозиторий.
  * CMakeLists.txt — корневой файл для сборки проекта с помощью CMake.

## Критерии приемки
  * Корректная работа всех заявленных операций.
  * Успешное выполнение тестов.
  * Удобство работы с системой.
